# Buzz Cut AI Filter

> ğŸ”¥ **AIé©±åŠ¨çš„æ™ºèƒ½å‘å‹è½¬æ¢å¹³å°** - ä½¿ç”¨å…ˆè¿›çš„AIæŠ€æœ¯å’Œäººè„¸ä¿æŠ¤æœºåˆ¶ï¼Œå®‰å…¨åœ°å°†ä»»ä½•å‘å‹è½¬æ¢ä¸ºå¯¸å¤´é€ å‹

ä¸€ä¸ªåŸºäºNext.jsã€AIè§†è§‰æ¨¡å‹å’Œé«˜çº§äººè„¸ä¿æŠ¤æŠ€æœ¯æ„å»ºçš„ç°ä»£åŒ–å‘å‹è½¬æ¢å¹³å°ã€‚ä¸“ä¸ºç”¨æˆ·æä¾›å®‰å…¨ã€å‡†ç¡®ã€é«˜è´¨é‡çš„å¯¸å¤´é¢„è§ˆä½“éªŒã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ›¡ï¸ **é«˜çº§äººè„¸ä¿æŠ¤æŠ€æœ¯**
- **äººè„¸IDé”å®š** - ä½¿ç”¨äººè„¸åµŒå…¥æŠ€æœ¯ç¡®ä¿èº«ä»½ä¸å˜
- **ç²¾å‡†å‘å‹åˆ†å‰²** - MediaPipeé£æ ¼çš„å¤´å‘åŒºåŸŸæ£€æµ‹
- **ControlNetçº¦æŸ** - é™åˆ¶AIç¼–è¾‘èŒƒå›´ï¼Œåªä¿®æ”¹å¤´å‘
- **é˜²æ¢è„¸æœºåˆ¶** - å¤šé‡æŠ€æœ¯æ ˆé˜²æ­¢èº«ä»½æ›¿æ¢

### ğŸ¨ **æ™ºèƒ½å‘å‹è½¬æ¢**
- **Flux Kontext Proæ¨¡å‹** - ä¸šç•Œé¢†å…ˆçš„å›¾åƒç”Ÿæˆæ¨¡å‹
- **å¤šç§å‘è‰²é€‰æ‹©** - é»‘è‰²ã€æ£•è‰²ã€é‡‘è‰²ã€ç°è‰²
- **çœŸå®æ„Ÿæ¸²æŸ“** - ä¿æŒåŸå§‹å…‰å½±å’Œç…§ç‰‡é£æ ¼
- **é«˜åˆ†è¾¨ç‡è¾“å‡º** - 1024x1024é«˜æ¸…å›¾åƒç”Ÿæˆ

### ğŸš€ **ç°ä»£åŒ–ç”¨æˆ·ä½“éªŒ**
- **æ‹–æ‹½ä¸Šä¼ ** - ç®€å•ç›´è§‚çš„å›¾ç‰‡ä¸Šä¼ ç•Œé¢
- **å®æ—¶é¢„è§ˆ** - å³æ—¶æŸ¥çœ‹è½¬æ¢æ•ˆæœ
- **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…å„ç§è®¾å¤‡
- **æµç•…åŠ¨ç”»** - ç²¾å¿ƒè®¾è®¡çš„äº¤äº’ä½“éªŒ

### ğŸ”§ **æŠ€æœ¯æ¶æ„**
- **Next.js 14** - App Router + æœåŠ¡å™¨ç»„ä»¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ
- **Tailwind CSS** - ç°ä»£åŒ–UIè®¾è®¡ç³»ç»Ÿ
- **Supabase** - èº«ä»½éªŒè¯å’Œæ•°æ®å­˜å‚¨
- **AIæ¨¡å‹é›†æˆ** - å¤šä¸ªAIæœåŠ¡APIæ•´åˆ

## ğŸ—ï¸ æŠ€æœ¯å®ç°

### äººè„¸ä¿æŠ¤æ ¸å¿ƒæœºåˆ¶

```typescript
// äººè„¸åµŒå…¥æå– (utils/face-protection.ts:120-144)
const faceEmbedding = await extractFaceEmbedding(imageBase64);

// å‘å‹åˆ†å‰²é®ç½©ç”Ÿæˆ (utils/face-protection.ts:77-115)  
const hairMask = await generateHairMask(imageBase64);

// ControlNet + IP-Adapter çº¦æŸç”Ÿæˆ (utils/face-protection.ts:149-194)
const result = await generateWithControlNet(
  originalImage,
  hairMask,
  faceEmbedding,
  color,
  { preserveFace: true, faceIdStrength: 0.8 }
);
```

### AIæ¨¡å‹é›†æˆ

- **Flux Kontext Pro** - ä¸»è¦çš„å›¾åƒç”Ÿæˆæ¨¡å‹
- **KIE API** - äººè„¸åˆ†æå’ŒåµŒå…¥æå–
- **å¤´å‘åˆ†å‰²æœåŠ¡** - ç²¾å‡†çš„å¤´å‘åŒºåŸŸæ£€æµ‹
- **å®‰å…¨å®¹å¿åº¦æ§åˆ¶** - é˜²æ­¢ä¸å½“å†…å®¹ç”Ÿæˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- npm æˆ– yarn
- Supabase è´¦æˆ·
- Replicate API å¯†é’¥
- KIE API å¯†é’¥

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/yourusername/buzz-cut-filter.git
   cd buzz-cut-filter
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **ç¯å¢ƒé…ç½®**
   ```bash
   cp .env.example .env.local
   ```
   
   é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
   ```env
   # Supabaseé…ç½®
   NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
   SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
   
   # AIæ¨¡å‹APIå¯†é’¥
   REPLICATE_API_TOKEN=your_replicate_token
   KIE_API_KEY=your_kie_api_key
   
   # åº”ç”¨é…ç½®
   NEXT_PUBLIC_SITE_URL=http://localhost:3000
   ```

4. **æ•°æ®åº“è®¾ç½®**
   - åœ¨Supabaseä¸­è¿è¡ŒSQLè¿ç§»æ–‡ä»¶
   - é…ç½®èº«ä»½éªŒè¯æä¾›å•†

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
buzz-cut-filter/
â”œâ”€â”€ app/                      # Next.jsåº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ api/                 # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ generate/        # ä¸»è¦ç”ŸæˆAPI
â”‚   â”‚   â”œâ”€â”€ generate-flux/   # Fluxæ¨¡å‹API
â”‚   â”‚   â””â”€â”€ webhooks/        # Webhookå¤„ç†
â”‚   â”œâ”€â”€ dashboard/           # ç”¨æˆ·ä»ªè¡¨æ¿
â”‚   â””â”€â”€ page.tsx            # é¦–é¡µ
â”œâ”€â”€ components/              # Reactç»„ä»¶
â”‚   â”œâ”€â”€ product/            # äº§å“æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ buzz-cut-simulator.tsx
â”‚   â”‚   â”œâ”€â”€ color-selector.tsx
â”‚   â”‚   â”œâ”€â”€ image-upload.tsx
â”‚   â”‚   â””â”€â”€ result-display.tsx
â”‚   â”œâ”€â”€ ui/                 # åŸºç¡€UIç»„ä»¶
â”‚   â””â”€â”€ home/               # é¦–é¡µç»„ä»¶
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ face-protection.ts  # äººè„¸ä¿æŠ¤æ ¸å¿ƒ
â”‚   â”œâ”€â”€ flux-kontext-api.ts # Flux APIé›†æˆ
â”‚   â”œâ”€â”€ kie-api.ts          # KIE APIé›†æˆ
â”‚   â””â”€â”€ supabase/           # Supabaseå·¥å…·
â”œâ”€â”€ types/                   # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ public/                  # é™æ€èµ„æº
```

## ğŸ” å®‰å…¨ç‰¹æ€§

### äººè„¸ä¿æŠ¤æœºåˆ¶

1. **èº«ä»½é”å®š**
   - æå–å¹¶ä¿å­˜åŸå§‹äººè„¸çš„æ•°å­—åŒ–ç‰¹å¾
   - ä½¿ç”¨äººè„¸åµŒå…¥ä½œä¸ºèº«ä»½éªŒè¯é”šç‚¹

2. **åŒºåŸŸé™åˆ¶**
   - ç²¾å‡†çš„å¤´å‘åˆ†å‰²é®ç½©
   - ç‰©ç†éš”ç¦»é¢éƒ¨å’Œå¤´å‘ç¼–è¾‘åŒºåŸŸ

3. **æ¨¡å‹çº¦æŸ**
   - ControlNetå¼•å¯¼ç”Ÿæˆè¿‡ç¨‹
   - IP-Adapteræ§åˆ¶é¢éƒ¨ç‰¹å¾ä¿æŒ

4. **Promptå·¥ç¨‹**
   - æ˜ç¡®æŒ‡ä»¤é™åˆ¶ç¼–è¾‘èŒƒå›´
   - å¼ºè°ƒä¿æŒé¢éƒ¨ç‰¹å¾ä¸å˜

### æ•°æ®å®‰å…¨

- å›¾ç‰‡ä¸´æ—¶å­˜å‚¨ï¼Œå®šæœŸæ¸…ç†
- APIå¯†é’¥åŠ å¯†å­˜å‚¨
- ç”¨æˆ·æ•°æ®éšç§ä¿æŠ¤
- å®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ éªŒè¯

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ

1. **ä¸Šä¼ ç…§ç‰‡**
   - æ”¯æŒ JPGã€PNG æ ¼å¼
   - å»ºè®®åˆ†è¾¨ç‡ 512x512 ä»¥ä¸Š
   - ç¡®ä¿äººè„¸æ¸…æ™°å¯è§

2. **é€‰æ‹©å‘è‰²**
   - é»‘è‰²ï¼šç»å…¸æ·±è‰²å¯¸å¤´
   - æ£•è‰²ï¼šè‡ªç„¶æ£•è‰²å¯¸å¤´  
   - é‡‘è‰²ï¼šæ—¶å°šé‡‘è‰²å¯¸å¤´
   - ç°è‰²ï¼šæˆç†Ÿé“¶ç°å¯¸å¤´

3. **ç”Ÿæˆé¢„è§ˆ**
   - ç‚¹å‡»"ç”Ÿæˆå¯¸å¤´"æŒ‰é’®
   - ç­‰å¾…AIå¤„ç†ï¼ˆé€šå¸¸1-3åˆ†é’Ÿï¼‰
   - æŸ¥çœ‹é«˜è´¨é‡è½¬æ¢ç»“æœ

### æœ€ä½³å®è·µ

- ğŸ“¸ ä½¿ç”¨å…‰çº¿å……è¶³çš„æ­£é¢ç…§ç‰‡
- ğŸ‘¤ ç¡®ä¿äººè„¸å ç…§ç‰‡ä¸»è¦éƒ¨åˆ†
- ğŸ” é¿å…æ¨¡ç³Šæˆ–ä½åˆ†è¾¨ç‡å›¾ç‰‡
- ğŸ’¡ å°è¯•ä¸åŒå‘è‰²æ‰¾åˆ°æœ€ä½³æ•ˆæœ

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### APIç«¯ç‚¹

```typescript
// ä¸»è¦ç”ŸæˆAPI
POST /api/generate
{
  "image_base64": "data:image/jpeg;base64,/9j/4AAQ...",
  "color": "black",
  "tier": "free"
}

// çŠ¶æ€æŸ¥è¯¢API  
GET /api/generate/[taskId]

// Fluxç›´æ¥API
POST /api/generate-flux
```

### æ ¸å¿ƒç»„ä»¶

- `BuzzCutSimulator` - ä¸»è¦äº¤äº’ç»„ä»¶
- `ImageUpload` - å›¾ç‰‡ä¸Šä¼ å¤„ç†
- `ColorSelector` - å‘è‰²é€‰æ‹©ç•Œé¢
- `ResultDisplay` - ç»“æœå±•ç¤ºç»„ä»¶

### æ‰©å±•å¼€å‘

1. **æ·»åŠ æ–°å‘è‰²**
   ```typescript
   // components/product/color-selector.tsx
   const COLOR_OPTIONS = [
     // æ·»åŠ æ–°çš„é¢œè‰²é…ç½®
   ];
   ```

2. **é›†æˆæ–°çš„AIæ¨¡å‹**
   ```typescript
   // utils/new-model-api.ts
   export class NewModelAPI {
     // å®ç°æ¨¡å‹æ¥å£
   }
   ```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- ğŸš€ **å›¾ç‰‡å‹ç¼©** - è‡ªåŠ¨ä¼˜åŒ–ä¸Šä¼ å›¾ç‰‡
- âš¡ **æµå¼å¤„ç†** - å¼‚æ­¥ä»»åŠ¡å¤„ç†æœºåˆ¶
- ğŸ”„ **æ™ºèƒ½ç¼“å­˜** - å‡å°‘é‡å¤APIè°ƒç”¨
- ğŸ“± **å“åº”å¼åŠ è½½** - é€‚é…ä¸åŒè®¾å¤‡æ€§èƒ½

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Verceléƒ¨ç½²ï¼ˆæ¨èï¼‰

1. è¿æ¥GitHubä»“åº“åˆ°Vercel
2. é…ç½®ç¯å¢ƒå˜é‡
3. è‡ªåŠ¨éƒ¨ç½²å®Œæˆ

### è‡ªå®šä¹‰éƒ¨ç½²

```bash
npm run build
npm start
```

### ç¯å¢ƒå˜é‡é…ç½®

ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ­£ç¡®é…ç½®æ‰€æœ‰APIå¯†é’¥å’ŒæœåŠ¡ç«¯ç‚¹ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒä¸å¸®åŠ©

- ğŸ“§ é‚®ç®±ï¼šsupport@example.com
- ğŸ’¬ å¾®ä¿¡ï¼šyour-wechat-id
- ğŸ› BugæŠ¥å‘Šï¼š[GitHub Issues](https://github.com/yourusername/buzz-cut-filter/issues)
- ğŸ“š æ–‡æ¡£ï¼š[å®Œæ•´æ–‡æ¡£](https://docs.example.com)

## ğŸ‰ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼š

- [Next.js](https://nextjs.org/) - Reactåº”ç”¨æ¡†æ¶
- [Flux Kontext Pro](https://replicate.com/) - AIå›¾åƒç”Ÿæˆæ¨¡å‹
- [Supabase](https://supabase.com/) - åç«¯å³æœåŠ¡
- [Tailwind CSS](https://tailwindcss.com/) - CSSæ¡†æ¶
- [Radix UI](https://www.radix-ui.com/) - æ— éšœç¢UIç»„ä»¶

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼**